#include "gfx.h"

// Tile data helpers
#define ROWS8(a, b) (a), (b), (a), (b), (a), (b), (a), (b), (a), (b), (a), (b), (a), (b), (a), (b)
#define ZEROS16 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00

// Sprite tiles (4bpp, 32 bytes/tile)
// Layout: Player (tiles 0-3), Enemy (tiles 4-7), Bullet (tile 8)
const u8 g_spriteTiles4bpp[] = {
    // Player tile 0 (8x8): square ship with cockpit (G=color 1, W=color 4)
    0x00, 0x00, 0x7E, 0x00, 0x66, 0x00, 0x66, 0x00, 0x7E, 0x00, 0x7E, 0x00, 0x7E, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    // Player tiles 1-3 (unused for 8x8 player)
    ZEROS16, ZEROS16,
    ZEROS16, ZEROS16,
    ZEROS16, ZEROS16,
    // Enemy tiles 4-7 (color index 2)
    ROWS8(0x00, 0xFF), ZEROS16,
    ROWS8(0x00, 0xFF), ZEROS16,
    ROWS8(0x00, 0xFF), ZEROS16,
    ROWS8(0x00, 0xFF), ZEROS16,
    // Bullet tile 8 (color index 3)
    ROWS8(0xFF, 0xFF), ZEROS16,
};

const u16 g_spriteTiles4bpp_len = sizeof(g_spriteTiles4bpp);

// Sprite palette (BGR555): transparent, green, magenta, yellow, white, gray, blue, red
const u16 g_spritePal[] = {
    0x0000, 0x03E0, 0x7C1F, 0x7FE0, 0x7FFF, 0x4210, 0x001F, 0x7C00,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
};
const u16 g_spritePal_len = sizeof(g_spritePal);

// Starfield tiles for BG2 (4bpp)
// Tile 0: solid black (color index 1) so we don't rely on backdrop color
// Tile 1-3: bright single-pixel stars (color index 2) on black
// Tile 4: dim single-pixel star (color index 3) on black
const u8 g_gridTiles4bpp[] = {
    // Tile 0: solid black (color index 1)
    ROWS8(0xFF, 0x00), ZEROS16,

    // Tile 1: bright star at (1,1) -> bit 6 on row 1 (set plane 1, clear plane 0)
    0xFF, 0x00,  0xBF, 0x40,  0xFF, 0x00,  0xFF, 0x00,
    0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,
    ZEROS16,

    // Tile 2: bright star at (6,2) -> bit 1 on row 2
    0xFF, 0x00,  0xFF, 0x00,  0xFD, 0x02,  0xFF, 0x00,
    0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,
    ZEROS16,

    // Tile 3: bright star at (3,6) -> bit 4 on row 6
    0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,
    0xFF, 0x00,  0xFF, 0x00,  0xEF, 0x10,  0xFF, 0x00,
    ZEROS16,

    // Tile 4: dim star at (4,4) -> bit 3 on row 4 (set plane 1, keep plane 0 => color index 3)
    0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,
    0xFF, 0x08,  0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,
    ZEROS16,
};
const u16 g_gridTiles4bpp_len = sizeof(g_gridTiles4bpp);

// BG palette #1: black, black, bright white stars, dim gray stars
const u16 g_gridPal16[] = {
    0x0000, 0x0000, 0x7FFF, 0x4210, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
};
const u16 g_gridPal16_len = sizeof(g_gridPal16);

#undef ROWS8
#undef ZEROS16
