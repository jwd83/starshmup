#include "gfx.h"

// Tile data helpers
#define ROWS8(a, b) (a), (b), (a), (b), (a), (b), (a), (b), (a), (b), (a), (b), (a), (b), (a), (b)
#define ZEROS16 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00

// Sprite tiles (4bpp, 32 bytes/tile)
// Layout: Player (tiles 0-3), Enemy (tiles 4-7), Bullet (tile 8)
const u8 g_spriteTiles4bpp[] = {
    // Player tiles 0-3 (16x16): classic saucer (uses colors 4=white, 5=gray, 6=cyan, 8=dark)
    // Tile 0 (top-left)
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x18, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x07, 0x08, 0x1F, 0x20,
    // Tile 1 (top-right)
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, 0x18, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x00, 0xE0, 0x10, 0xF8, 0x04,
    // Tile 2 (bottom-left)
    0x38, 0x00, 0x7F, 0x00, 0x35, 0x0A, 0x1F, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x3F, 0x40, 0x7F, 0x00, 0x3F, 0x40, 0x1F, 0x20, 0x01, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    // Tile 3 (bottom-right)
    0x1C, 0x00, 0xFE, 0x00, 0x54, 0xA8, 0xF8, 0x00, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xFC, 0x02, 0xFE, 0x00, 0xFC, 0x02, 0xF8, 0x04, 0x40, 0xB0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    // Enemy tiles 4-7 (16x16): biological bomb (uses colors 1=green, 4=white, 7=magenta, 8=dark)
    // Tile 4 (top-left)
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x09, 0x00, 0x13, 0x00, 0x3F, 0x07, 0x3F, 0x07,
    0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x04, 0x06, 0x10, 0x0C, 0x20, 0x07, 0x00, 0x07, 0x00,
    // Tile 5 (top-right)
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x00, 0xF0, 0x00, 0xF8, 0x00, 0xFC, 0x70, 0x7C, 0x70,
    0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x20, 0x00, 0x08, 0x00, 0x04, 0x70, 0x00, 0x70, 0x80,
    // Tile 6 (bottom-left)
    0x3F, 0x07, 0x37, 0x01, 0x3F, 0x01, 0x3F, 0x01, 0x1D, 0x00, 0x0F, 0x00, 0x02, 0x00, 0x00, 0x00,
    0x07, 0x40, 0x01, 0x48, 0x01, 0x00, 0x01, 0x00, 0x00, 0x22, 0x00, 0x10, 0x00, 0x05, 0x00, 0x00,
    // Tile 7 (bottom-right)
    0x7C, 0x70, 0xEC, 0xC0, 0xFC, 0xC0, 0xFC, 0xC0, 0xD8, 0x00, 0xF0, 0x00, 0x40, 0x00, 0x00, 0x00,
    0x70, 0x82, 0xC0, 0x12, 0xC0, 0x00, 0xC0, 0x00, 0x00, 0x24, 0x00, 0x08, 0x00, 0xA0, 0x00, 0x00,
    // Bullet tile 8 (8x8): round torpedo (uses colors 3=yellow, 4=white highlight, 8=dark outline)
    0x00, 0x00, 0x18, 0x18, 0x24, 0x24, 0x3C, 0x3C, 0x3C, 0x3C, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x18, 0x00, 0x24, 0x18, 0x42, 0x00, 0x42, 0x00, 0x42, 0x00, 0x24, 0x00, 0x18, 0x00, 0x00,
};

const u16 g_spriteTiles4bpp_len = sizeof(g_spriteTiles4bpp);

// Sprite palettes (BGR555) - separate palette per sprite type
// SNES sprite palettes are at CGRAM 128-255 (palettes 0-7, 16 colors each)

// Player palette (sprite palette 0, CGRAM 128-143)
// Uses: 0=transparent, 4=white, 5=gray, 6=cyan, 8=dark
const u16 g_playerPal[] = {
    0x0000, 0x0000, 0x0000, 0x0000, 0x7FFF, 0x4210, 0x7FE0, 0x0000,
    0x2108, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
};
const u16 g_playerPal_len = sizeof(g_playerPal);

// Enemy palette (sprite palette 1, CGRAM 144-159)
// Uses: 0=transparent, 1=green, 4=white, 7=magenta, 8=dark
const u16 g_enemyPal[] = {
    0x0000, 0x03E0, 0x0000, 0x0000, 0x7FFF, 0x0000, 0x0000, 0x7C1F,
    0x2108, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
};
const u16 g_enemyPal_len = sizeof(g_enemyPal);

// Bullet palette (sprite palette 2, CGRAM 160-175)
// Uses: 0=transparent, 3=yellow, 4=white, 8=dark
const u16 g_bulletPal[] = {
    0x0000, 0x0000, 0x0000, 0x03FF, 0x7FFF, 0x0000, 0x0000, 0x0000,
    0x2108, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
};
const u16 g_bulletPal_len = sizeof(g_bulletPal);

// Starfield tiles for BG2 (4bpp)
// Tile 0: solid black (color index 1) so we don't rely on backdrop color
// Tile 1-3: bright single-pixel stars (color index 2) on black
// Tile 4: dim single-pixel star (color index 3) on black
const u8 g_gridTiles4bpp[] = {
    // Tile 0: solid black (color index 1)
    ROWS8(0xFF, 0x00), ZEROS16,

    // Tile 1: bright star at (1,1) -> bit 6 on row 1 (set plane 1, clear plane 0)
    0xFF, 0x00,  0xBF, 0x40,  0xFF, 0x00,  0xFF, 0x00,
    0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,
    ZEROS16,

    // Tile 2: bright star at (6,2) -> bit 1 on row 2
    0xFF, 0x00,  0xFF, 0x00,  0xFD, 0x02,  0xFF, 0x00,
    0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,
    ZEROS16,

    // Tile 3: bright star at (3,6) -> bit 4 on row 6
    0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,
    0xFF, 0x00,  0xFF, 0x00,  0xEF, 0x10,  0xFF, 0x00,
    ZEROS16,

    // Tile 4: dim star at (4,4) -> bit 3 on row 4 (set plane 1, keep plane 0 => color index 3)
    0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,
    0xFF, 0x08,  0xFF, 0x00,  0xFF, 0x00,  0xFF, 0x00,
    ZEROS16,
};
const u16 g_gridTiles4bpp_len = sizeof(g_gridTiles4bpp);

// BG palette #1: black, black, bright white stars, dim gray stars
const u16 g_gridPal16[] = {
    0x0000, 0x0000, 0x7FFF, 0x4210, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
};
const u16 g_gridPal16_len = sizeof(g_gridPal16);

#undef ROWS8
#undef ZEROS16
